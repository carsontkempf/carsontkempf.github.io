---
title: Dashboard
---

<!DOCTYPE html>
<html lang="en-US">
  {% include widgets/header/head.html %}
  <body>
    <aside class="sidebar">
      {% include widgets/sidebar/sidebar.html %}
    </aside>

    {% include components/ui/sidebar-toggle.html %}

    <div class="page-content">
      <header class="header">
        {% include widgets/header/main.html %}
      </header>
      
      <div class="wrapper">
        <main class="main-content">
          <!-- Dashboard-specific content wrapper -->
          <div class="dashboard-container">
            <div class="dashboard-header">
              <h1>{{ page.title | default: "Dashboard" }}</h1>
              <nav class="dashboard-nav">
                <a href="{{ '/' | relative_url }}" class="nav-link">Home</a>
                <button id="logout-btn" class="nav-link logout-btn">Logout</button>
              </nav>
            </div>
            
            <div class="dashboard-main-content">
              <h2>Welcome to your Dashboard!</h2>
              <p>This page is only visible to authenticated users.</p>
              <div id="dashboard-content">
                  <p>Loading dashboard data...</p>
              </div>

              <!-- This is where content from the page using this layout will be injected -->
              {{ content }}
            </div>
          </div>
        </main>
        <footer class="footer">
          {% include widgets/footer/footer.html %}
        </footer>
      </div>
    </div>

    <!-- Load Auth0 SPA SDK -->
    <script defer src="https://cdn.auth0.com/js/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>
    
    <!-- MusicKit JS for Apple Music integration -->
    <script src="https://js-cdn.music.apple.com/musickit/v1/musickit.js" defer></script>
    
    <script src="{{ '/assets/js/env-config.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/auth.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/google-drive-service.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/google-picker-service.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/folder-debug-service.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/annotation-drive-service.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/apple-music-service.js' | relative_url }}"></script>

    <!-- Dashboard functionality script -->
    <script>
      // Removed automatic content override - let individual pages control their content
      console.log('[Dashboard Layout] Dashboard layout loaded, ready for custom content.');

      // Add logout functionality when DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
          const logoutBtn = document.getElementById('logout-btn');
          if (logoutBtn) {
              logoutBtn.addEventListener('click', async () => {
                  console.log('[Dashboard] Logout button clicked');
                  if (window.siteAuth && window.siteAuth.auth0Client) {
                      try {
                          await window.siteAuth.auth0Client.logout({
                              logoutParams: {
                                  returnTo: window.location.origin
                              }
                          });
                      } catch (error) {
                          console.error('[Dashboard] Error during logout:', error);
                      }
                  } else {
                      console.warn('[Dashboard] No auth client available for logout');
                      window.location.href = '{{ "/" | relative_url }}';
                  }
              });
          }
      });
    </script>
  </body>
</html>